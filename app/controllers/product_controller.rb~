class ProductController < ApplicationController
	layout nil
	
	def suggest_category
		name = params[:id]
		suggested_category = Product.product_category(name)
		p = Product.new
		p.name = name
		p.category_id = suggested_category
		render :json => p
	end
	
	def new
		if !params[:bill_id]
			render :inline => 'no bill given in parameters', :status => 403
			return
		end
		@product = Product.new
		@product.bill = Bill.find_by_id params[:bill_id]
		render 'form'
	end
	
	def create
		@product = Product.new params[:product]
		if !@product.save
			# TODO: ERROR
		end
	end
	
	def edit
		@product = Product.find_by_id params[:id]
		render 'form'
	end
	
	def update
		p = Product.find_by_id params[:id]
		p.update_attributes params[:product]
	end
	
	def destroy
		p = Product.find_by_id params[:id]
		p.destroy
	end
end
